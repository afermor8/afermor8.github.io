<!DOCTYPE html>
<html lang="es" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Criptografía III. Certificados digiales. HTTPS - Mi paso por ASIR Blog</title>
  <meta name="description" content="Certificado digital de persona física Tarea 1: Instalación del certificado 1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito Este punto lo explico junto al siguiente punto para mostrar las capturas.
2. Muestra una captura de pantalla donde se vea las preferencias del navegador donde se ve instalado tu certificado Una vez tenemos el certificado digital, para agregarlo a Google Chrome vamos a los tres puntos de la barra superior y hacemos click en Configuración.">
  <meta name="author" content="afermor8"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Mi paso por ASIR Blog",
    
    "url": "https:\/\/afermor8.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/afermor8.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/afermor8.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/afermor8.github.io\/post\/cripto3\/",
          "name": "Criptografía iii. certificados digiales. HTTP s"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "afermor8"
  },
  "headline": "Criptografía III. Certificados digiales. HTTPS",
  "description" : "Certificado digital de persona física Tarea 1: Instalación del certificado 1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito Este punto lo explico junto al siguiente punto para mostrar las capturas.\n2. Muestra una captura de pantalla donde se vea las preferencias del navegador donde se ve instalado tu certificado Una vez tenemos el certificado digital, para agregarlo a Google Chrome vamos a los tres puntos de la barra superior y hacemos click en Configuración.",
  "inLanguage" : "es",
  "wordCount":  3279 ,
  "datePublished" : "2023-01-11T13:42:27",
  "dateModified" : "2023-01-11T13:42:27",
  "image" : "https:\/\/afermor8.github.io\/img\/avatar-icon.png",
  "keywords" : [ "SAD" ],
  "mainEntityOfPage" : "https:\/\/afermor8.github.io\/post\/cripto3\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/afermor8.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/afermor8.github.io\/img\/avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Criptografía III. Certificados digiales. HTTPS" />
<meta property="og:description" content="Certificado digital de persona física Tarea 1: Instalación del certificado 1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito Este punto lo explico junto al siguiente punto para mostrar las capturas.
2. Muestra una captura de pantalla donde se vea las preferencias del navegador donde se ve instalado tu certificado Una vez tenemos el certificado digital, para agregarlo a Google Chrome vamos a los tres puntos de la barra superior y hacemos click en Configuración.">
<meta property="og:image" content="https://afermor8.github.io/img/avatar-icon.png" />
<meta property="og:url" content="https://afermor8.github.io/post/cripto3/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Mi paso por ASIR Blog" />

  <meta name="twitter:title" content="Criptografía III. Certificados digiales. HTTPS" />
  <meta name="twitter:description" content="Certificado digital de persona física Tarea 1: Instalación del certificado 1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito Este punto lo …">
  <meta name="twitter:image" content="https://afermor8.github.io/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <link href='https://afermor8.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.104.3" />
  <link rel="alternate" href="https://afermor8.github.io/index.xml" type="application/rss+xml" title="Mi paso por ASIR Blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://afermor8.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://afermor8.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://afermor8.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Conmuta navegación</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://afermor8.github.io">Mi paso por ASIR Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Mi paso por ASIR Blog" href="https://afermor8.github.io">
            <img class="avatar-img" src="https://afermor8.github.io/img/avatar-icon.png" alt="Mi paso por ASIR Blog" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  
    <div id="header-big-imgs" data-num-img=3 
      
         
          data-img-src-1="/img/triangle.jpg" 
         
         data-img-desc-1="Triangle"
      
         
          data-img-src-2="/img/sphere.jpg" 
         
         data-img-desc-2="Sphere"
      
         
          data-img-src-3="/img/hexagon.jpg" 
         
         data-img-desc-3="Hexagon"
      ></div>
  

  <header class="header-section has-img">
    
      <div class="intro-header big-img">
        
        <div class="container">
          <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <div class="post-heading">
                <h1>Criptografía III. Certificados digiales. HTTPS</h1>
                  
                  
                    <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Publicado el January 11, 2023
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;16&nbsp;minutos
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;3279&nbsp;palabras
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;afermor8
    
  
  
</span>


                  
              </div>
            </div>
          </div>
        </div>
        <span class="img-desc" style="display: inline;"></span>
      </div>
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Criptografía III. Certificados digiales. HTTPS</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Publicado el January 11, 2023
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;16&nbsp;minutos
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;3279&nbsp;palabras
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;afermor8
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <hr>
<h2 id="certificado-digital-de-persona-física">Certificado digital de persona física</h2>
<hr>
<h3 id="tarea-1-instalación-del-certificado">Tarea 1: Instalación del certificado</h3>
<h4 id="1-una-vez-que-hayas-obtenido-tu-certificado-explica-brevemente-como-se-instala-en-tu-navegador-favorito">1. Una vez que hayas obtenido tu certificado, explica brevemente como se instala en tu navegador favorito</h4>
<p>Este punto lo explico junto al siguiente punto para mostrar las capturas.</p>
<h4 id="2-muestra-una-captura-de-pantalla-donde-se-vea-las-preferencias-del-navegador-donde-se-ve-instalado-tu-certificado">2. Muestra una captura de pantalla donde se vea las preferencias del navegador donde se ve instalado tu certificado</h4>
<p>Una vez tenemos el certificado digital, para agregarlo a Google Chrome vamos a los tres puntos de la barra superior y hacemos click en <strong>Configuración</strong>. Abrimos el desplegable de la izquierda y seleccionamos <strong>Privacidad y seguridad</strong>. Ahí abrimos la pestaña <strong>Seguridad</strong> y entre las opciones que nos da seleccionamos <strong>Gestionar certificados</strong>. Importamos el certificado que tenemos.</p>
<p><img src="/img/cripto3/1.png" alt="certificado"></p>
<p>Introducimos la contraseña del certificado y ya lo tendremos agregado.</p>
<p><img src="/img/cripto3/2.png" alt="certificado"></p>
<p>Si le damos a ver el certificado comprobamos que se ha agregado correctamente mi certificado de la FNMT-RCM.</p>
<p><img src="/img/cripto3/3.png" alt="certificado"></p>
<h4 id="3-cómo-puedes-hacer-una-copia-de-tu-certificado-como-vas-a-realizar-la-copia-de-seguridad-de-tu-certificado-razona-la-respuesta">3. ¿Cómo puedes hacer una copia de tu certificado?, ¿Como vas a realizar la copia de seguridad de tu certificado?. Razona la respuesta.</h4>
<p>Para hacer una copia de este certificado, en la misma página anterior de configuración del navegador Chrome seleccionamos <strong>Exportar</strong>.</p>
<p><img src="/img/cripto3/4.png" alt="certificado"></p>
<p>Seleccionamos la carpeta donde lo queremos guardar, en mi caso he elegido la carpeta <strong>Documentos</strong>. Introduciomos la contraseña del certificado.</p>
<p><img src="/img/cripto3/5.png" alt="certificado"></p>
<p>Y ya tendremos la copia del certificado.</p>
<p><img src="/img/cripto3/6.png" alt="certificado"></p>
<h4 id="4-investiga-como-exportar-la-clave-pública-de-tu-certificado">4. Investiga como exportar la clave pública de tu certificado.</h4>
<p>Para exportar la clave pública del certificado sin la clave privada lo he hecho desde Mozilla Firefox, donde también tengo instalado mi certificado. Voy a las opciones de <strong>Ajustes</strong> y aquí clickamos sobre <strong>Privacidad &amp; Seguridad</strong>. Vamos a la opción <strong>Ver certificados&hellip;</strong> y se nos abre la siguiente ventana.</p>
<p><img src="/img/cripto3/7.png" alt="certificado"></p>
<p>Selecciono la opción <strong>Ver</strong> y me aparecerá la siguiente información sobre el certificado:</p>
<p><img src="/img/cripto3/8.png" alt="certificado"></p>
<p>En Misceláneo selecciono la opción <strong>PEM (cert)</strong> y se descargará la clave pública.</p>
<p><img src="/img/cripto3/9.png" alt="certificado"></p>
<p><img src="/img/cripto3/10.png" alt="certificado"></p>
<h3 id="tarea-2-validación-del-certificado">Tarea 2: Validación del certificado</h3>
<h4 id="1-instala-en-tu-ordenador-el-software-autofirma-y-desde-la-página-de-valide-valida-tu-certificado-muestra-capturas-de-pantalla-donde-se-comprueba-la-validación">1. Instala en tu ordenador el software autofirma y desde la página de VALIDe valida tu certificado. Muestra capturas de pantalla donde se comprueba la validación.</h4>
<h5 id="autofirma">AutoFirma</h5>
<p>Primero instalar los siguientes paquetes si no los tenemos.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo apt install default-jdk libnss3-tools
</span></span></code></pre></div><p>Descargo con wget la aplicación <strong>AutoFirma</strong> en la carpeta Documentos.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">wget https://estaticos.redsara.es/comunes/autofirma/1/7/1/AutoFirma_Linux.zip
</span></span></code></pre></div><p>Extraemos los ficheros del .zip descargado para proceder a instalarlo.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">unzip AutoFirma_Linux.zip
</span></span><span class="line"><span class="cl">rm Autofirma_Linux.zip
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo dpkg -i AutoFirma_1_7_1.deb
</span></span></code></pre></div><p>Ya podemos usar AutoFirma.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">AutoFirma
</span></span></code></pre></div><p><img src="/img/cripto3/23.png" alt="certificado"></p>
<h5 id="valide">VALIDe</h5>
<p>Vamos a validar mi certificado desde la página <a href="https://valide.redsara.es/valide/validarCertificado/ejecutar.html;jsessionid=EDCDF2E1A8EEA1A761F4DAC78667757C">VALIDe</a>.</p>
<p>Hacemos click en <strong>Seleccionar Certificado</strong>.</p>
<p><img src="/img/cripto3/16.png" alt="certificado"></p>
<p>Nos pedirá permiso para abrir con AutoFirma.</p>
<p><img src="/img/cripto3/17.png" alt="certificado"></p>
<p>Seleccionamos el certificado.</p>
<p><img src="/img/cripto3/18.png" alt="certificado"></p>
<p>Introducimos el código de seguridad y validamos.</p>
<p><img src="/img/cripto3/19.png" alt="certificado"></p>
<h3 id="tarea-3-firma-electrónica">Tarea 3: Firma electrónica</h3>
<h4 id="1-utilizando-la-página-valide-y-el-programa-autofirma-firma-un-documento-con-tu-certificado-y-envíalo-por-correo-a-un-compañero">1. Utilizando la página VALIDe y el programa autofirma, firma un documento con tu certificado y envíalo por correo a un compañero.</h4>
<p>He creado dos archivos que firmaré, uno con Autofirma y otro con VALIDe.</p>
<p><img src="/img/cripto3/24.png" alt="certificado"></p>
<p><img src="/img/cripto3/25.png" alt="certificado"></p>
<p>En AutoFirma seleccionamos el fichero y lo firmamos.</p>
<p><img src="/img/cripto3/11.png" alt="certificado"></p>
<p>Nos aparece el siguiente mensaje informativo:</p>
<p><img src="/img/cripto3/12.png" alt="certificado"></p>
<p>Aceptamos y nos dirá que seleccionemos el certificado.</p>
<p><img src="/img/cripto3/13.png" alt="certificado"></p>
<p>Guardamos el fichero firmado.</p>
<p><img src="/img/cripto3/14.png" alt="certificado"></p>
<p><img src="/img/cripto3/15.png" alt="certificado"></p>
<p>Ahora vamos a <a href="https://valide.redsara.es/valide/firmar/ejecutar.html">VALIDe</a> y firmamos el otro fichero.</p>
<p><img src="/img/cripto3/26.png" alt="certificado"></p>
<p>Seleccionamos el fichero a firmar.</p>
<p><img src="/img/cripto3/27.png" alt="certificado"></p>
<p>Y seleccionamos el certificado.</p>
<p><img src="/img/cripto3/28.png" alt="certificado"></p>
<p>El fichero ya se ha firmado. Ahora tendremos que seleccionar <strong>Guardar firma</strong> para que se guarde el fichero.</p>
<p><img src="/img/cripto3/29.png" alt="certificado"></p>
<p>Envío estos ficheros firmados a un compañero.</p>
<h4 id="2-tu-debes-recibir-otro-documento-firmado-por-un-compañero-y-utilizando-las-herramientas-anteriores-debes-visualizar-la-firma-visualizar-firma-y-verificar-firma-puedes-verificar-la-firma-aunque-no-tengas-la-clave-pública-de-tu-compañero-es-necesario-estar-conectado-a-internet-para-hacer-la-validación-de-la-firma-razona-tus-respuestas">2. Tu debes recibir otro documento firmado por un compañero y utilizando las herramientas anteriores debes visualizar la firma (Visualizar Firma) y (Verificar Firma). ¿Puedes verificar la firma aunque no tengas la clave pública de tu compañero?, ¿Es necesario estar conectado a internet para hacer la validación de la firma?. Razona tus respuestas.</h4>
<p>He recibido dos ficheros de mi compañero.</p>
<p><img src="/img/cripto3/30.png" alt="certificado"></p>
<p>Visualizo el primero con AutoFirma.</p>
<p><img src="/img/cripto3/31.png" alt="certificado"></p>
<p>Comprobamos que el fichero está firmado correctamente.</p>
<p><img src="/img/cripto3/32.png" alt="certificado"></p>
<p>Ahora visualizamos la firma con <a href="https://valide.redsara.es/valide/validarFirma/ejecutar.html">VALIDe</a>.</p>
<p><img src="/img/cripto3/36.png" alt="certificado"></p>
<p><img src="/img/cripto3/35.png" alt="certificado"></p>
<p>Y a continuación la validamos.</p>
<p><img src="/img/cripto3/33.png" alt="certificado"></p>
<p><img src="/img/cripto3/34.png" alt="certificado"></p>
<p>Podemos comprobar que se pueden verificar las firmas de los ficheros aunque no tengamos su clave pública, ya que esta se adjunta al fichero firmado.</p>
<p>En cuanto a si es necesario estar conectados a Internet para validar las firmas, con AutoFirma no es necesario ya que es una aplicación de escritorio. Para VALIDe si necesitaremos conección a Internet para acceder a su página web.</p>
<h4 id="3-entre-dos-compañeros-firmar-los-dos-un-documento-verificar-la-firma-para-comprobar-que-está-firmado-por-los-dos">3. Entre dos compañeros, firmar los dos un documento, verificar la firma para comprobar que está firmado por los dos.</h4>
<p>Voy a firmar uno de los documentos que me envió mi compañero en el ejercicio anterior. Usaré AutoFirma para firmarlo.</p>
<p><img src="/img/cripto3/37.png" alt="certificado"></p>
<p><img src="/img/cripto3/38.png" alt="certificado"></p>
<p><img src="/img/cripto3/39.png" alt="certificado"></p>
<p><img src="/img/cripto3/40.png" alt="certificado"></p>
<h3 id="tarea-4-autentificación">Tarea 4: Autentificación</h3>
<h4 id="1-utilizando-tu-certificado-accede-a-alguna-página-de-la-administración-pública-cita-médica-becas-puntos-del-carnet-entrega-capturas-de-pantalla-donde-se-demuestre-el-acceso-a-ellas">1. Utilizando tu certificado accede a alguna página de la administración pública )cita médica, becas, puntos del carnet,…). Entrega capturas de pantalla donde se demuestre el acceso a ellas.</h4>
<p>Voy a acceder a ClicSalud+ con mi certificado digital, para ello me voy a su <a href="https://www.sspa.juntadeandalucia.es/servicioandaluzdesalud/clicsalud/">web</a> y hago click en la opción de Acceder con Certificado digital.</p>
<p><img src="/img/cripto3/20.png" alt="certificado"></p>
<p>Selecciono mi certificado y le doy a Aceptar.</p>
<p><img src="/img/cripto3/21.png" alt="certificado"></p>
<p>Compruebo que ya he accedido con mi usuario y que puedo ver mis datos.</p>
<p><img src="/img/cripto3/22.png" alt="certificado"></p>
<hr>
<h2 id="https--ssl">HTTPS / SSL</h2>
<blockquote>
<p>Antes de hacer esta práctica vamos a crear una página web (puedes usar una página estática o instalar una aplicación web) en un servidor web apache2 que se acceda con el nombre <code>tunombre.iesgn.org</code>.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo apt install apache2
</span></span><span class="line"><span class="cl">sudo mkdir /var/www/arantxa.iesgn.org
</span></span><span class="line"><span class="cl">sudo nano /var/www/arantxa.iesgn.org/index.html
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;!DOCTYPE html lang=&#34;es&#34;&gt;
</span></span><span class="line"><span class="cl">      &lt;head&gt;
</span></span><span class="line"><span class="cl">          &lt;meta charset=&#34;utf-8&#34;&gt;
</span></span><span class="line"><span class="cl">          &lt;title&gt;arantxa.iesgn.org&lt;/title&gt;
</span></span><span class="line"><span class="cl">      &lt;/head&gt;
</span></span><span class="line"><span class="cl">      &lt;body&gt;
</span></span><span class="line"><span class="cl">          &lt;h1&gt;Arantxa Fernández Morató&lt;/h1&gt;
</span></span><span class="line"><span class="cl">          &lt;h2&gt;Criptografia III. Certificados digitales y https.&lt;/h2&gt;
</span></span><span class="line"><span class="cl">          &lt;p&gt;Esto es una web de prueba para la práctica de criptografía de SAD.&lt;/p&gt;
</span></span><span class="line"><span class="cl">      &lt;/body&gt;
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cd /etc/apache2/sites-available
</span></span><span class="line"><span class="cl">sudo cp 000-default.conf arantxa.iesgn.org.conf
</span></span><span class="line"><span class="cl">sudo nano arantxa.iesgn.org.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;VirtualHost *:80&gt;
</span></span><span class="line"><span class="cl">        ServerName arantxa.iesgn.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ServerAdmin webmaster@localhost
</span></span><span class="line"><span class="cl">        DocumentRoot /var/www/arantxa.iesgn.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ErrorLog ${APACHE_LOG_DIR}/error-arantxaiesgn.log
</span></span><span class="line"><span class="cl">        CustomLog ${APACHE_LOG_DIR}/access-arantxaiesgn.log combined
</span></span><span class="line"><span class="cl">&lt;/VirtualHost&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo a2ensite arantxa.iesgn.org.conf
</span></span><span class="line"><span class="cl">sudo systemctl restart apache2
</span></span><span class="line"><span class="cl">sudo nano /etc/hosts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">192.168.122.192     arantxa.iesgn.org
</span></span></code></pre></div><h3 id="tarea-1-certificado-autofirmado">Tarea 1: Certificado autofirmado</h3>
<p>Esta práctica la vamos a realizar con un compañero. En un primer momento un alumno creará una Autoridad Certficadora y firmará un certificado para la página del otro alumno. Posteriormente se volverá a realizar la práctica con los roles cambiados.</p>
<p>Para hacer esta práctica puedes buscar información en internet, algunos enlaces interesantes:</p>
<ul>
<li><a href="https://www.phildev.net/ssl/">Phil’s X509/SSL Guide</a></li>
<li><a href="https://gist.github.com/Soarez/9688998">How to setup your own CA with OpenSSL</a></li>
<li><a href="https://blog.guillen.io/2018/09/29/crear-autoridad-certificadora-ca-y-certificados-autofirmados-en-linux/">Crear autoridad certificadora (CA) y certificados autofirmados en Linux</a></li>
</ul>
<h3 id="autoridad-certificadora">Autoridad certificadora</h3>
<p>El alumno que hace de Autoridad Certificadora deberá entregar una documentación donde explique los siguientes puntos:</p>
<h4 id="1-crear-su-autoridad-certificadora-generar-el-certificado-digital-de-la-ca-mostrar-el-fichero-de-configuración-de-la-ac">1. Crear su autoridad certificadora (generar el certificado digital de la CA). Mostrar el fichero de configuración de la AC.</h4>
<p>En la máquina virtual donde crearé la web estática voy a crear la autoridad certificadora.</p>
<p>Accedo con root y creo los siguientes directorios:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo su
</span></span><span class="line"><span class="cl">mkdir -p CA/{certsdb,certreqs,crl,private,certs}
</span></span><span class="line"><span class="cl">cd CA
</span></span></code></pre></div><p>Cambio los permisos al fichero private por motivos de seguridad.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">chmod 700 private
</span></span></code></pre></div><p>Creamos un fichero donde se guardarán los certificados existentes.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">touch index.txt
</span></span></code></pre></div><p>Copiamos el fichero openssl para adaptarlo a nuestras necesidades.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cp /usr/lib/ssl/openssl.cnf .
</span></span><span class="line"><span class="cl">nano openssl.cnf
</span></span></code></pre></div><p>Lo modificamos y lo dejamos como se muestra a continuación:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zed" data-lang="zed"><span class="line"><span class="cl"><span class="err">#</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">OpenSSL</span><span class="w"> </span><span class="n">example</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">mostly</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">generation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">requests</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">configuration</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="p">.</span><span class="n">include</span><span class="w"> </span><span class="n">directive</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="p">.</span><span class="n">include</span><span class="w"> </span><span class="n">filename</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="kt">definition</span><span class="w"> </span><span class="n">stops</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">choking</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">HOME</span><span class="w"> </span><span class="n">isn</span><span class="err">&#39;</span><span class="n">t</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">defined</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">HOME</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Extra</span><span class="w"> </span><span class="n">OBJECT</span><span class="w"> </span><span class="n">IDENTIFIER</span><span class="w"> </span><span class="n">info</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#oid_file</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="n">ENV</span><span class="o">::</span><span class="nn">HOME/</span><span class="p">.</span><span class="n">oid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">oid_section</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">new_oids</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">System</span><span class="w"> </span><span class="n">default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">openssl_conf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">default_conf</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">To</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">&#34;</span><span class="o">-</span><span class="n">extfile</span><span class="err">&#34;</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="err">&#34;</span><span class="n">openssl</span><span class="w"> </span><span class="n">x509</span><span class="err">&#34;</span><span class="w"> </span><span class="n">utility</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">section</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">the</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">X</span><span class="p">.</span><span class="err">509</span><span class="n">v3</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">extensions</span><span class="w">		</span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">only</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">X</span><span class="p">.</span><span class="err">509</span><span class="n">v3</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="w"> </span><span class="n">default</span><span class="p">]</span><span class="w"> </span><span class="n">section</span><span class="p">.)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">new_oids</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">OIDs</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="err">&#39;</span><span class="n">ca</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="n">req</span><span class="err">&#39;</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="err">&#39;</span><span class="n">ts</span><span class="err">&#39;</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">OID</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">testoid1</span><span class="o">=</span><span class="err">1</span><span class="p">.</span><span class="err">2</span><span class="p">.</span><span class="err">3</span><span class="p">.</span><span class="err">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Or</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">substitution</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">testoid2</span><span class="o">=</span><span class="err">$</span><span class="p">{</span><span class="n">testoid1</span><span class="p">}.</span><span class="err">5</span><span class="p">.</span><span class="err">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Policies</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">examples</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">tsa_policy1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">1</span><span class="p">.</span><span class="err">2</span><span class="p">.</span><span class="err">3</span><span class="p">.</span><span class="err">4</span><span class="p">.</span><span class="err">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">tsa_policy2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">1</span><span class="p">.</span><span class="err">2</span><span class="p">.</span><span class="err">3</span><span class="p">.</span><span class="err">4</span><span class="p">.</span><span class="err">5</span><span class="p">.</span><span class="err">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">tsa_policy3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">1</span><span class="p">.</span><span class="err">2</span><span class="p">.</span><span class="err">3</span><span class="p">.</span><span class="err">4</span><span class="p">.</span><span class="err">5</span><span class="p">.</span><span class="err">7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">####################################################################</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">ca</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_ca</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">CA_default</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">ca</span><span class="w"> </span><span class="n">section</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">####################################################################</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">CA_default</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">dir</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="o">/</span><span class="nn">root/</span><span class="n">CA</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Where</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">kept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">certs</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">certsdb</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">issued</span><span class="w"> </span><span class="n">certs</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">kept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">crl_dir</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">crl</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Where</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">issued</span><span class="w"> </span><span class="n">crl</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">kept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">database</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">index</span><span class="p">.</span><span class="n">txt</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">database</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="n">file</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#unique_subject</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">no</span><span class="w">			</span><span class="err">#</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">&#39;</span><span class="n">no</span><span class="err">&#39;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="n">creation</span><span class="w"> </span><span class="n">of</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="err">#</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">certs</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">subject</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">new_certs_dir</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">certs</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">certs</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">certificate</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">cacert</span><span class="p">.</span><span class="n">pem</span><span class="w"> 	</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">CA</span><span class="w"> </span><span class="n">certificate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">serial</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">serial</span><span class="w"> 		</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">serial</span><span class="w"> </span><span class="n">number</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">crlnumber</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">crlnumber</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">crl</span><span class="w"> </span><span class="n">number</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="err">#</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">commented</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">V1</span><span class="w"> </span><span class="n">CRL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">crl</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">crl</span><span class="p">.</span><span class="n">pem</span><span class="w"> 		</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">CRL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">private_key</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/private/</span><span class="n">cakey</span><span class="p">.</span><span class="n">pem</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">x509_extensions</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">usr_cert</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cert</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Comment</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">lines</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">&#34;</span><span class="n">traditional</span><span class="err">&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">and</span><span class="w"> </span><span class="n">highly</span><span class="w"> </span><span class="n">broken</span><span class="p">)</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">name_opt</span><span class="w"> 	</span><span class="o">=</span><span class="w"> </span><span class="n">ca_default</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Subject</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="n">options</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">cert_opt</span><span class="w"> 	</span><span class="o">=</span><span class="w"> </span><span class="n">ca_default</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Certificate</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">options</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Extension</span><span class="w"> </span><span class="n">copying</span><span class="w"> </span><span class="n">option</span><span class="o">:</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">caution</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">copy_extensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CRL</span><span class="p">.</span><span class="w"> </span><span class="n">Note</span><span class="o">:</span><span class="w"> </span><span class="n">Netscape</span><span class="w"> </span><span class="n">communicator</span><span class="w"> </span><span class="n">chokes</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">V2</span><span class="w"> </span><span class="n">CRLs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">commented</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">V1</span><span class="w"> </span><span class="n">CRL</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">crlnumber</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">commented</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">V1</span><span class="w"> </span><span class="n">CRL</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">crl_extensions</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">crl_ext</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_days</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">365</span><span class="w">			</span><span class="err">#</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">certify</span><span class="w"> </span><span class="n">for</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_crl_days</span><span class="o">=</span><span class="w"> </span><span class="err">30</span><span class="w">			</span><span class="err">#</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">long</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">CRL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_md</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">default</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">MD</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">preserve</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">no</span><span class="w">			</span><span class="err">#</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">DN</span><span class="w"> </span><span class="n">ordering</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">few</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">specifying</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">look</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">CA</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">listed</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">supplied</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="o">:-</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">policy</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">policy_match</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">CA</span><span class="w"> </span><span class="n">policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">policy_match</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">match</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">stateOrProvinceName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">match</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">match</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationalUnitName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commonName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">supplied</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">emailAddress</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">&#39;</span><span class="n">anything</span><span class="err">&#39;</span><span class="w"> </span><span class="n">policy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">At</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">acceptable</span><span class="w"> </span><span class="err">&#39;</span><span class="n">object</span><span class="err">&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">types</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">policy_anything</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">stateOrProvinceName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">localityName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationalUnitName</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commonName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">supplied</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">emailAddress</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">optional</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">####################################################################</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">req</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_bits</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">2048</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_keyfile</span><span class="w"> 	</span><span class="o">=</span><span class="w"> </span><span class="n">privkey</span><span class="p">.</span><span class="n">pem</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">distinguished_name</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">req_distinguished_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">attributes</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">req_attributes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">x509_extensions</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">v3_ca</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="n">signed</span><span class="w"> </span><span class="n">cert</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Passwords</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">prompted</span><span class="w"> </span><span class="n">for</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">input_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">output_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">secret</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">sets</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">permitted</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">types</span><span class="p">.</span><span class="w"> </span><span class="n">There</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">several</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">default</span><span class="o">:</span><span class="w"> </span><span class="n">PrintableString</span><span class="p">,</span><span class="w"> </span><span class="n">T61String</span><span class="p">,</span><span class="w"> </span><span class="n">BMPString</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">pkix</span><span class="w">	 </span><span class="o">:</span><span class="w"> </span><span class="n">PrintableString</span><span class="p">,</span><span class="w"> </span><span class="n">BMPString</span><span class="w"> </span><span class="p">(</span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendation</span><span class="w"> </span><span class="n">before</span><span class="w"> </span><span class="err">2004</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">utf8only</span><span class="o">:</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">UTF8Strings</span><span class="w"> </span><span class="p">(</span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendation</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="err">2004</span><span class="p">).</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nombstr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PrintableString</span><span class="p">,</span><span class="w"> </span><span class="n">T61String</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="n">BMPStrings</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">UTF8Strings</span><span class="p">).</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">MASK</span><span class="o">:</span><span class="n">XXXX</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">literal</span><span class="w"> </span><span class="n">mask</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">WARNING</span><span class="o">:</span><span class="w"> </span><span class="n">ancient</span><span class="w"> </span><span class="n">versions</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">Netscape</span><span class="w"> </span><span class="n">crash</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">BMPStrings</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">UTF8Strings</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">string_mask</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">utf8only</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">req_extensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v3_req</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">request</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">req_distinguished_name</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="err">2</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName_default</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">ES</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName_min</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="err">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">countryName_max</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="err">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">stateOrProvinceName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">Province</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">full</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">stateOrProvinceName_default</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">Sevilla</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">localityName</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">Locality</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">localityName_default</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">Dos</span><span class="w"> </span><span class="n">Hermanas</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">0</span><span class="p">.</span><span class="n">organizationName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">Organization</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">company</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">0</span><span class="p">.</span><span class="n">organizationName_default</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">Afermor8</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="o">:-</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#1</span><span class="p">.</span><span class="n">organizationName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">Second</span><span class="w"> </span><span class="n">Organization</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">company</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#1</span><span class="p">.</span><span class="n">organizationName_default</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">World</span><span class="w"> </span><span class="n">Wide</span><span class="w"> </span><span class="n">Web</span><span class="w"> </span><span class="n">Pty</span><span class="w"> </span><span class="n">Ltd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationalUnitName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">Organizational</span><span class="w"> </span><span class="n">Unit</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">section</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">organizationalUnitName_default</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">GN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commonName</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">Common</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">FQDN</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">YOUR</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">commonName_max</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="err">64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">emailAddress</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">Email</span><span class="w"> </span><span class="n">Address</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">emailAddress_max</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">SET</span><span class="o">-</span><span class="n">ex3</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">SET</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="err">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">req_attributes</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#challengePassword</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">challenge</span><span class="w"> </span><span class="n">password</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#challengePassword_min</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#challengePassword_max</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#unstructuredName</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">An</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">company</span><span class="w"> </span><span class="n">name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">usr_cert</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="err">&#39;</span><span class="n">ca</span><span class="err">&#39;</span><span class="w"> </span><span class="n">signs</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">guidelines</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">CAs</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">software</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">interpreting</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CA</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">basicConstraints</span><span class="o">=</span><span class="n">CA</span><span class="o">:</span><span class="n">FALSE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Here</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nsCertType</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">omitted</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="o">*</span><span class="n">except</span><span class="o">*</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">OK</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">SSL</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objsign</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">typical</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="n">objsign</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">typical</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">keyUsage</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">certificate</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">keyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonRepudiation</span><span class="p">,</span><span class="w"> </span><span class="n">digitalSignature</span><span class="p">,</span><span class="w"> </span><span class="n">keyEncipherment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Netscape</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">listbox</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">nsComment</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="err">&#34;</span><span class="n">OpenSSL</span><span class="w"> </span><span class="n">Generated</span><span class="w"> </span><span class="n">Certificate</span><span class="err">&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendations</span><span class="w"> </span><span class="n">harmless</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">certificates</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">subjectKeyIdentifier</span><span class="o">=</span><span class="n">hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">authorityKeyIdentifier</span><span class="o">=</span><span class="n">keyid</span><span class="p">,</span><span class="n">issuer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">stuff</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">subjectAltName</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">issuerAltname</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Import</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">subjectAltName</span><span class="o">=</span><span class="n">email</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">An</span><span class="w"> </span><span class="n">alternative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">aren</span><span class="err">&#39;</span><span class="n">t</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">deprecated</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">PKIX</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">subjectAltName</span><span class="o">=</span><span class="n">email</span><span class="o">:</span><span class="n">move</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Copy</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="n">details</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">issuerAltName</span><span class="o">=</span><span class="n">issuer</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsCaRevocationUrl</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">:</span><span class="c1">//www.domain.dom/ca-crl.pem
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">#nsBaseUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsRevocationUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsRenewalUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsCaPolicyUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsSslServerName</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">certificates</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">extendedKeyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">critical</span><span class="p">,</span><span class="n">timeStamping</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">v3_req</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Extensions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">request</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">basicConstraints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CA</span><span class="o">:</span><span class="n">FALSE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">keyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonRepudiation</span><span class="p">,</span><span class="w"> </span><span class="n">digitalSignature</span><span class="p">,</span><span class="w"> </span><span class="n">keyEncipherment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">v3_ca</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Extensions</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">typical</span><span class="w"> </span><span class="n">CA</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendation</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">subjectKeyIdentifier</span><span class="o">=</span><span class="n">hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">authorityKeyIdentifier</span><span class="o">=</span><span class="n">keyid</span><span class="o">:</span><span class="n">always</span><span class="p">,</span><span class="n">issuer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">basicConstraints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">critical</span><span class="p">,</span><span class="n">CA</span><span class="o">:</span><span class="n">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Key</span><span class="w"> </span><span class="n">usage</span><span class="o">:</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">typical</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CA</span><span class="w"> </span><span class="n">certificate</span><span class="p">.</span><span class="w"> </span><span class="n">However</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">prevent</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">self</span><span class="o">-</span><span class="n">signed</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">best</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">default</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">keyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cRLSign</span><span class="p">,</span><span class="w"> </span><span class="n">keyCertSign</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Some</span><span class="w"> </span><span class="n">might</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">also</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sslCA</span><span class="p">,</span><span class="w"> </span><span class="n">emailCA</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Include</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="n">alt</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">subjectAltName</span><span class="o">=</span><span class="n">email</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Copy</span><span class="w"> </span><span class="n">issuer</span><span class="w"> </span><span class="n">details</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">issuerAltName</span><span class="o">=</span><span class="n">issuer</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">DER</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="n">encoding</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">extension</span><span class="o">:</span><span class="w"> </span><span class="n">beware</span><span class="w"> </span><span class="n">experts</span><span class="w"> </span><span class="n">only</span><span class="o">!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">obj</span><span class="o">=</span><span class="n">DER</span><span class="o">:</span><span class="err">02</span><span class="o">:</span><span class="err">03</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Where</span><span class="w"> </span><span class="err">&#39;</span><span class="n">obj</span><span class="err">&#39;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">object</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">override</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">extension</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">basicConstraints</span><span class="o">=</span><span class="w"> </span><span class="n">critical</span><span class="p">,</span><span class="w"> </span><span class="n">DER</span><span class="o">:</span><span class="err">30</span><span class="o">:</span><span class="err">03</span><span class="o">:</span><span class="err">01</span><span class="o">:</span><span class="err">01</span><span class="o">:</span><span class="n">FF</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">crl_ext</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">CRL</span><span class="w"> </span><span class="n">extensions</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Only</span><span class="w"> </span><span class="n">issuerAltName</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">authorityKeyIdentifier</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">sense</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CRL</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">issuerAltName</span><span class="o">=</span><span class="n">issuer</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">authorityKeyIdentifier</span><span class="o">=</span><span class="n">keyid</span><span class="o">:</span><span class="n">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">proxy_cert_ext</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">extensions</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="n">certificate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">against</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">guidelines</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">CAs</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">software</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">interpreting</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CA</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">basicConstraints</span><span class="o">=</span><span class="n">CA</span><span class="o">:</span><span class="n">FALSE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Here</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">examples</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">nsCertType</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">omitted</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">anything</span><span class="w"> </span><span class="o">*</span><span class="n">except</span><span class="o">*</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">OK</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">SSL</span><span class="w"> </span><span class="n">server</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="n">server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objsign</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">typical</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">everything</span><span class="w"> </span><span class="n">including</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">signing</span><span class="o">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">nsCertType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="p">,</span><span class="w"> </span><span class="n">objsign</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">typical</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">keyUsage</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">certificate</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">keyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nonRepudiation</span><span class="p">,</span><span class="w"> </span><span class="n">digitalSignature</span><span class="p">,</span><span class="w"> </span><span class="n">keyEncipherment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">Netscape</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">comment</span><span class="w"> </span><span class="n">listbox</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">nsComment</span><span class="w">			</span><span class="o">=</span><span class="w"> </span><span class="err">&#34;</span><span class="n">OpenSSL</span><span class="w"> </span><span class="n">Generated</span><span class="w"> </span><span class="n">Certificate</span><span class="err">&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">PKIX</span><span class="w"> </span><span class="n">recommendations</span><span class="w"> </span><span class="n">harmless</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">certificates</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">subjectKeyIdentifier</span><span class="o">=</span><span class="n">hash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">authorityKeyIdentifier</span><span class="o">=</span><span class="n">keyid</span><span class="p">,</span><span class="n">issuer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">stuff</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">subjectAltName</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">issuerAltname</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Import</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">address</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">subjectAltName</span><span class="o">=</span><span class="n">email</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">An</span><span class="w"> </span><span class="n">alternative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">produce</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">aren</span><span class="err">&#39;</span><span class="n">t</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">deprecated</span><span class="w"> </span><span class="n">according</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">PKIX</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">subjectAltName</span><span class="o">=</span><span class="n">email</span><span class="o">:</span><span class="n">move</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">Copy</span><span class="w"> </span><span class="n">subject</span><span class="w"> </span><span class="n">details</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">issuerAltName</span><span class="o">=</span><span class="n">issuer</span><span class="o">:</span><span class="n">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsCaRevocationUrl</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">http</span><span class="o">:</span><span class="c1">//www.domain.dom/ca-crl.pem
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nv">#nsBaseUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsRevocationUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsRenewalUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsCaPolicyUrl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nv">#nsSslServerName</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">really</span><span class="w"> </span><span class="n">needs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">place</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="n">certificate</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">proxyCertInfo</span><span class="o">=</span><span class="n">critical</span><span class="p">,</span><span class="n">language</span><span class="o">:</span><span class="n">id</span><span class="o">-</span><span class="n">ppl</span><span class="o">-</span><span class="n">anyLanguage</span><span class="p">,</span><span class="n">pathlen</span><span class="o">:</span><span class="err">3</span><span class="p">,</span><span class="n">policy</span><span class="o">:</span><span class="n">foo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">####################################################################</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">tsa</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_tsa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tsa_config1</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">section</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="w"> </span><span class="n">tsa_config1</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">#</span><span class="w"> </span><span class="n">These</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">reply</span><span class="w"> </span><span class="n">generation</span><span class="w"> </span><span class="n">only</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">dir</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">demoCA</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">directory</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">serial</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">tsaserial</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">serial</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">(</span><span class="n">mandatory</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">crypto_device</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">builtin</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">OpenSSL</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">signing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">signer_cert</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">tsacert</span><span class="p">.</span><span class="n">pem</span><span class="w"> 	</span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">signing</span><span class="w"> </span><span class="n">certificate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">certs</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/</span><span class="n">cacert</span><span class="p">.</span><span class="n">pem</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">Certificate</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">reply</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">signer_key</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="nn">dir/private/</span><span class="n">tsakey</span><span class="p">.</span><span class="n">pem</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">signer_digest</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">sha256</span><span class="w">			</span><span class="err">#</span><span class="w"> </span><span class="n">Signing</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="p">.</span><span class="w"> </span><span class="p">(</span><span class="n">Optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">default_policy</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">tsa_policy1</span><span class="w">		</span><span class="err">#</span><span class="w"> </span><span class="n">Policy</span><span class="w"> </span><span class="n">if</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="n">did</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">it</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">other_policies</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">tsa_policy2</span><span class="p">,</span><span class="w"> </span><span class="n">tsa_policy3</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">acceptable</span><span class="w"> </span><span class="n">policies</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">digests</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="n">sha1</span><span class="p">,</span><span class="w"> </span><span class="n">sha256</span><span class="p">,</span><span class="w"> </span><span class="n">sha384</span><span class="p">,</span><span class="w"> </span><span class="n">sha512</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Acceptable</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="n">digests</span><span class="w"> </span><span class="p">(</span><span class="n">mandatory</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">accuracy</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">secs</span><span class="o">:</span><span class="err">1</span><span class="p">,</span><span class="w"> </span><span class="n">millisecs</span><span class="o">:</span><span class="err">500</span><span class="p">,</span><span class="w"> </span><span class="n">microsecs</span><span class="o">:</span><span class="err">100</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">clock_precision_digits</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="err">0</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="n">after</span><span class="w"> </span><span class="n">dot</span><span class="p">.</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ordering</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">yes</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">Is</span><span class="w"> </span><span class="n">ordering</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">timestamps</span><span class="o">?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">tsa_name</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">yes</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">Must</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">TSA</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">reply</span><span class="o">?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ess_cert_id_chain</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">no</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">Must</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ESS</span><span class="w"> </span><span class="n">cert</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="n">chain</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">included</span><span class="o">?</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="err">#</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ess_cert_id_alg</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="n">sha1</span><span class="w">	</span><span class="err">#</span><span class="w"> </span><span class="n">algorithm</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compute</span><span class="w"> </span><span class="n">certificate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="err">#</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="p">(</span><span class="n">optional</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="o">:</span><span class="w"> </span><span class="n">sha1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="n">default_conf</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssl_conf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ssl_sect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="n">ssl_sect</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">system_default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">system_default_sect</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="n">system_default_sect</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">MinProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TLSv1</span><span class="p">.</span><span class="err">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">CipherString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DEFAULT</span><span class="err">@</span><span class="n">SECLEVEL</span><span class="o">=</span><span class="err">2</span><span class="w">
</span></span></span></code></pre></div><p>Creamos a continuación la clave y el fichero de solicitud de firma.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">openssl req -new -newkey rsa:2048 -keyout private/cakey.pem -out careq.pem -config ./openssl.cnf
</span></span></code></pre></div><p><img src="/img/cripto3/46.png" alt="clave"></p>
<p>Nos autofirmamos el certificado generado.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">openssl ca -create_serial -out cacert.pem -days 365 -keyfile private/cakey.pem -selfsign -extensions v3_ca -config ./openssl.cnf -infiles careq.pem
</span></span></code></pre></div><p><img src="/img/cripto3/47.png" alt="clave"></p>
<h4 id="2-debe-recibir-el-fichero-csr-solicitud-de-firmar-un-certificado-de-su-compañero-debe-firmarlo-y-enviar-el-certificado-generado-a-su-compañero">2. Debe recibir el fichero CSR (Solicitud de Firmar un Certificado) de su compañero, debe firmarlo y enviar el certificado generado a su compañero.</h4>
<p>Mi compañero me envía su fichero CSR mediante scp, el cual he movido al directorio <strong>/root/CA/certreqs/</strong>, y se lo firmo del siguiente modo:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">openssl ca -config openssl.cnf -out certsdb/arturo.crt -infiles certreqs/arturo.csr 
</span></span></code></pre></div><p>Una vez firmado se lo vuelvo a enviar.</p>
<h4 id="3-qué-otra-información-debes-aportar-a-tu-compañero-para-que-éste-configure-de-forma-adecuada-su-servidor-web-con-el-certificado-generado">3. ¿Qué otra información debes aportar a tu compañero para que éste configure de forma adecuada su servidor web con el certificado generado?</h4>
<p>Habría que enviar a nuestro compañero además el certificado de la autoridad certificadora (cacert.pem) para que pueda verificar la firma sobre su propio certificado.</p>
<h3 id="administrador-servidor-web">Administrador servidor web</h3>
<p>El alumno que hace de administrador del servidor web, debe entregar una documentación que describa los siguientes puntos:</p>
<h4 id="1-crea-una-clave-privada-rsa-de-4096-bits-para-identificar-el-servidor">1. Crea una clave privada RSA de 4096 bits para identificar el servidor.</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">openssl genrsa -out /etc/ssl/private/clavearantxa.key 4096
</span></span><span class="line"><span class="cl">chmod 400 /etc/ssl/private/clavearantxa.key
</span></span></code></pre></div><p><img src="/img/cripto3/50.png" alt="certificado"></p>
<h4 id="2-utiliza-la-clave-anterior-para-generar-un-csr-considerando-que-deseas-acceder-al-servidor-con-el-fqdn-tunombreiesgnorg">2. Utiliza la clave anterior para generar un CSR, considerando que deseas acceder al servidor con el FQDN (tunombre.iesgn.org).</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">openssl req -new -sha256 -key /etc/ssl/private/clavearantxa.key -out arantxa.csr
</span></span></code></pre></div><p><img src="/img/cripto3/41.png" alt="certificado"></p>
<h4 id="3-envía-la-solicitud-de-firma-a-la-entidad-certificadora-su-compañero">3. Envía la solicitud de firma a la entidad certificadora (su compañero).</h4>
<p>Le envío mi csr (arantxa.csr) a mi compañero mediante scp.</p>
<p><img src="/img/cripto3/42.png" alt="certificado"></p>
<h4 id="4-recibe-como-respuesta-un-certificado-x509-para-el-servidor-firmado-y-el-certificado-de-la-autoridad-certificadora">4. Recibe como respuesta un certificado X.509 para el servidor firmado y el certificado de la autoridad certificadora.</h4>
<p>Recibo mi csr firmado por la autoridad certificadora de mi compañero.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ls -l /home/usuario1/ | egrep &#39;(cacert|arantxa)&#39;
</span></span></code></pre></div><p><img src="/img/cripto3/43.png" alt="csr"></p>
<h4 id="5-configura-tu-servidor-web-con-https-en-el-puerto-443-haciendo-que-las-peticiones-http-se-redireccionen-a-https-forzar-https">5. Configura tu servidor web con https en el puerto 443, haciendo que las peticiones http se redireccionen a https (forzar https).</h4>
<p>Para empezar copio los ficheros a /etc/ssl/certs/, cambiamos el usuario al que pertenece y cambiamos los permisos.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cp /home/usuario1/arantxa.crt /etc/ssl/certs/
</span></span><span class="line"><span class="cl">cp /home/usuario1/cacert.pem /etc/ssl/certs/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">chown root:root /etc/ssl/certs/arantxa.crt
</span></span><span class="line"><span class="cl">chown root:root /etc/ssl/certs/cacert.pem
</span></span><span class="line"><span class="cl">chmod 644 /etc/ssl/certs/arantxa.crt
</span></span><span class="line"><span class="cl">chmod 644 /etc/ssl/certs/cacert.pem
</span></span></code></pre></div><p>Modificamos el virtualhost para https.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nano /etc/apache2/sites-available/default-ssl.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;IfModule mod_ssl.c&gt;
</span></span><span class="line"><span class="cl">        &lt;VirtualHost *:443&gt;
</span></span><span class="line"><span class="cl">                ServerAdmin webmaster@localhost
</span></span><span class="line"><span class="cl">                ServerName arantxa.iesgn.org
</span></span><span class="line"><span class="cl">                DocumentRoot /var/www/arantxa.iesgn.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                ErrorLog ${APACHE_LOG_DIR}/error-arantxaiesgn.log
</span></span><span class="line"><span class="cl">                CustomLog ${APACHE_LOG_DIR}/access-arantxaiesgn.log combined
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                SSLEngine on
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                SSLCertificateFile      /etc/ssl/certs/arantxa.crt
</span></span><span class="line"><span class="cl">                SSLCertificateKeyFile /etc/ssl/private/clavearantxa.key
</span></span><span class="line"><span class="cl">                SSLCACertificateFile /etc/ssl/certs/cacert.pem
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                &lt;FilesMatch &#34;\.(cgi|shtml|phtml|php)$&#34;&gt;
</span></span><span class="line"><span class="cl">                                SSLOptions +StdEnvVars
</span></span><span class="line"><span class="cl">                &lt;/FilesMatch&gt;
</span></span><span class="line"><span class="cl">                &lt;Directory /usr/lib/cgi-bin&gt;
</span></span><span class="line"><span class="cl">                                SSLOptions +StdEnvVars
</span></span><span class="line"><span class="cl">                &lt;/Directory&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        &lt;/VirtualHost&gt;
</span></span><span class="line"><span class="cl">&lt;/IfModule&gt;
</span></span></code></pre></div><p>Habilito el virualhost para https y el módulo ssl.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a2ensite default-ssl
</span></span><span class="line"><span class="cl">a2enmod ssl
</span></span></code></pre></div><p>Añadimos la redirección al virtualhost y reiniciamos el servicio:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo nano /etc/apache2/sites-available/arantxa.iesgn.org.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;VirtualHost *:80&gt;
</span></span><span class="line"><span class="cl">        ServerName arantxa.iesgn.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ServerAdmin webmaster@localhost
</span></span><span class="line"><span class="cl">        DocumentRoot /var/www/arantxa.iesgn.org
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ErrorLog ${APACHE_LOG_DIR}/error-arantxaiesgn.log
</span></span><span class="line"><span class="cl">        CustomLog ${APACHE_LOG_DIR}/access-arantxaiesgn.log combined
</span></span><span class="line"><span class="cl">        Redirect 301 / https://arantxa.iesgn.org/
</span></span><span class="line"><span class="cl">&lt;/VirtualHost&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo systemctl restart apache2
</span></span></code></pre></div><p>Al intentar acceder nos aparece lo siguiente:</p>
<p><img src="/img/cripto3/44.png" alt="web"></p>
<p>Tendremos que importar el certificado cacert.pem que nos mandó nuestro compañero para que nos permita acceder de forma segura.</p>
<p><img src="/img/cripto3/45.png" alt="web"></p>
<p><img src="/img/cripto3/48.png" alt="web"></p>
<p><img src="/img/cripto3/49.png" alt="web"></p>
<p>Ya debería funcionar correctamente mi página web desde https.</p>
<p><img src="/img/cripto3/58.png" alt="web"></p>
<h4 id="6-instala-ahora-un-servidor-nginx-y-realiza-la-misma-configuración-que-anteriormente-para-que-se-sirva-la-página-con-https">6. Instala ahora un servidor nginx, y realiza la misma configuración que anteriormente para que se sirva la página con HTTPS.</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">systemctl disable --now apache2
</span></span><span class="line"><span class="cl">apt install nginx
</span></span><span class="line"><span class="cl">nano /etc/nginx/sites-available/arantxa.iesgn.org.nginx.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">        listen 80;
</span></span><span class="line"><span class="cl">        listen [::]:80;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        server_name arantxa.iesgn.org;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        return 301 https://$server_name$request_uri;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">server {
</span></span><span class="line"><span class="cl">        listen 443 ssl http2;
</span></span><span class="line"><span class="cl">        listen [::]:443 ssl http2;
</span></span><span class="line"><span class="cl">        server_name arantxa.iesgn.org;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ssl_certificate    /etc/ssl/certs/arantxa.crt;
</span></span><span class="line"><span class="cl">        ssl_certificate_key    /etc/ssl/private/clavearantxa.key;
</span></span><span class="line"><span class="cl">        ssl_trusted_certificate /etc/ssl/certs/cacert.pem;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        root /var/www/arantxa.iesgn.org;
</span></span><span class="line"><span class="cl">        index index.html index.htm index.nginx-debian.html;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        location / {
</span></span><span class="line"><span class="cl">                try_files $uri $uri/ =404;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>Modifico el html:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;!DOCTYPE html lang=&#34;es&#34;&gt;
</span></span><span class="line"><span class="cl">      &lt;head&gt;
</span></span><span class="line"><span class="cl">          &lt;meta charset=&#34;utf-8&#34;&gt;
</span></span><span class="line"><span class="cl">          &lt;title&gt;arantxa.iesgn.org&lt;/title&gt;
</span></span><span class="line"><span class="cl">      &lt;/head&gt;
</span></span><span class="line"><span class="cl">      &lt;body&gt;
</span></span><span class="line"><span class="cl">          &lt;h1&gt;Arantxa Fernández Morató&lt;/h1&gt;
</span></span><span class="line"><span class="cl">          &lt;h2&gt;Criptografía III. Certificados digitales y https.&lt;/h2&gt;
</span></span><span class="line"><span class="cl">          &lt;p&gt;Esto es una web de prueba para la práctica de criptografía de SAD.&lt;/p&gt;
</span></span><span class="line"><span class="cl">          &lt;p&gt;NGINX funcionando!!!&lt;/p&gt;
</span></span><span class="line"><span class="cl">      &lt;/body&gt;
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span></code></pre></div><p>Crear el enlace simbólico y reiniciar servicio nginx:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ln -s /etc/nginx/sites-available/arantxa.iesgn.org.nginx.conf /etc/nginx/sites-enabled/
</span></span><span class="line"><span class="cl">systemctl restart nginx
</span></span></code></pre></div><p>Compruebo que la web funciona correctamente.</p>
<p><img src="/img/cripto3/59.png" alt="web-nginx"></p>
<p><img src="/img/cripto3/60.png" alt="web-nginx2"></p>


        
          <div class="blog-tags">
            
              <a href="https://afermor8.github.io/tags/sad/">SAD</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f&amp;text=Criptograf%c3%ada%20III.%20Certificados%20digiales.%20HTTPS&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f&amp;title=Criptograf%c3%ada%20III.%20Certificados%20digiales.%20HTTPS" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f&amp;title=Criptograf%c3%ada%20III.%20Certificados%20digiales.%20HTTPS" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f&amp;title=Criptograf%c3%ada%20III.%20Certificados%20digiales.%20HTTPS" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fafermor8.github.io%2fpost%2fcripto3%2f&amp;description=Criptograf%c3%ada%20III.%20Certificados%20digiales.%20HTTPS" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">Ver también</h4>
                  <ul>
                
                
                    <li><a href="/post/examen_cortafuegos/">Examen Cortafuegos</a></li>
                
                    <li><a href="/post/firewall2/">Cortafuegos II: Perimetral con nftables</a></li>
                
                    <li><a href="/post/firewall1/">Cortafuegos I: de nodo con iptables</a></li>
                
                    <li><a href="/post/vpn/">Vpn. Redes Privadas Virtuales</a></li>
                
                    <li><a href="/post/cripto2/">Criptografía II. Integridad, firmas y autenticación</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://afermor8.github.io/post/cripto2/" data-toggle="tooltip" data-placement="top" title="Criptografía II. Integridad, firmas y autenticación">&larr; Artículo anterior</a>
            </li>
          
          
            <li class="next">
              <a href="https://afermor8.github.io/post/vpn/" data-toggle="tooltip" data-placement="top" title="Vpn. Redes Privadas Virtuales">Artículo siguiente &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="mailto:ara.fer.mor@gmail.com" title="Email me">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://github.com/afermor8" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://Afermor.slack.com/" title="Slack">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-slack fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://linkedin.com/in/arantxa-f-6136617b" title="LinkedIn">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://telegram.me/arantxipu" title="Telegram">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-telegram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="afermor8.github.io">afermor8</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2023
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://afermor8.github.io">Mi paso por ASIR Blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.104.3</a> alimentada &nbsp;&bull;&nbsp; Tema <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adaptado de <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://afermor8.github.io/js/main.js"></script>
<script src="https://afermor8.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://afermor8.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

